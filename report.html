<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jasmine Liu (2550117)">
<meta name="author" content="Harris Wang (2551003)">
<meta name="author" content="William Xu (2538911)">
<meta name="author" content="Karl Zhou (2593454)">
<meta name="dcterms.date" content="2024-12-09">

<title>Economic Indicators and Income Groups</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="report_files/libs/clipboard/clipboard.min.js"></script>
<script src="report_files/libs/quarto-html/quarto.js"></script>
<script src="report_files/libs/quarto-html/popper.min.js"></script>
<script src="report_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="report_files/libs/quarto-html/anchor.min.js"></script>
<link href="report_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="report_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="report_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="report_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="report_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Economic Indicators and Income Groups</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-contents">
             <p>Jasmine Liu (2550117) </p>
             <p>Harris Wang (2551003) </p>
             <p>William Xu (2538911) </p>
             <p>Karl Zhou (2593454) </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 9, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Our final project aims to explore intricate relationships among key economic indicators across different income groups worldwide. Using data from the World Bank’s World Development Indicators (WDI) database, our analysis focuses on three principal economic metrics: GDP per capita, annual GDP growth, and the employment-to-population ratio. By examining these indicators, we aim to uncover patterns and insights that can inform economic strategies tailored to the unique challenges and opportunities faced by countries at various stages of economic development.</p>
<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">Background</h2>
<p>Economic indicators are vital tools for assessing the economic performance of countries. They not only reflect the economic health of a nation but also guide policy decisions and investment strategies. In this analysis, we aim to understand how these indicators vary across countries classified into different income groups: high-income, upper-middle-income, lower-middle-income, and low-income countries. These distinctions are crucial as they often dictate the economic priorities and policy interventions that are most effective for each group.</p>
<p>Economic development is a multifaceted process influenced by a myriad of factors ranging from geopolitical stability and regulatory frameworks to access to technology and the quality of human capital. The interplay between these factors and economic outcomes can be complex and is often mediated by the specific socio-economic context of each country. For instance, high-income countries typically exhibit stable economic growth and high levels of GDP per capita but may face challenges such as aging populations and environmental sustainability. Conversely, low-income countries often struggle with high levels of poverty and underemployment, despite sometimes experiencing rapid economic growth.</p>
<p>The World Development Indicators (WDI) provide a comprehensive dataset that allows for an in-depth analysis of these issues. The WDI compiles statistically rigorous data that spans decades, offering a longitudinal perspective on economic development. This rich dataset enables researchers to trace the trajectories of economic indicators across time and evaluate the impact of economic policies and external shocks on different income groups. By leveraging this data, our project seeks to contribute to the ongoing discourse on global economic inequality and development, offering insights that could help shape more effective and equitable economic policies.</p>
<p>Through this analysis, we not only explore the current state of global economic health but also aim to forecast future trends. Understanding these trends is essential for policymakers, economists, and international organizations striving to promote sustainable development and reduce economic disparities worldwide. By identifying the key drivers of economic success and the challenges that hinder progress, this project will provide valuable guidance for crafting strategies that enhance economic stability and prosperity for all income groups.</p>
</section>
<section id="research-questions" class="level2">
<h2 class="anchored" data-anchor-id="research-questions">Research Questions</h2>
<p>Our final project revolves around two main questions: 1. How do GDP growth rates differ across all income groups? 2. Does a higher employment-to-population ratio always correlate with higher GDP per capita in low-income countries?</p>
</section>
<section id="objectives" class="level2">
<h2 class="anchored" data-anchor-id="objectives">Objectives</h2>
<p>Our objectives of this project are to: - Analyze the trends and disparities in GDP growth, GDP per capita, and employment ratios across different income groups. - Explore the potential correlations between high employment rates and GDP per capita in the context of low-income countries. - Provide insights that could assist in the formulation of economic policies tailored to specific income groups.</p>
</section>
<section id="data-and-methods" class="level2">
<h2 class="anchored" data-anchor-id="data-and-methods">Data and Methods</h2>
<p>Our analysis uses comprehensive datasets from the World Bank spaning from 1960 to 2023, providing a strong base for longitudinal analysis.</p>
</section>
</section>
<section id="data-description" class="level1">
<h1>Data Description</h1>
<p>This project uses several datasets sourced from the World Bank’s World Development Indicators database. The primary focus is on exploring how different economic indicators such as GDP growth, GDP per capita, and employment-to-population ratios vary across different income groups over the years. This section provides a detailed description of each dataset.</p>
<section id="datasets-overview" class="level2">
<h2 class="anchored" data-anchor-id="datasets-overview">Datasets Overview</h2>
<section id="gdp-growth-annual" class="level3">
<h3 class="anchored" data-anchor-id="gdp-growth-annual">GDP Growth (Annual %)</h3>
<ul>
<li><strong>File Name</strong>: <code>gdpg.csv</code></li>
<li><strong>Description</strong>: This dataset contains annual percentage growth rates of GDP at market prices based on constant local currency. Aggregates are based on constant 2010 U.S. dollars.</li>
<li><strong>Variables</strong>:
<ul>
<li><code>Country_Name</code>: Name of the country.</li>
<li><code>Country_Code</code>: ISO country code.</li>
<li><code>Year</code>: Year of the data record, ranging from 1960 to 2023.</li>
<li><code>GDP_Growth</code>: Annual GDP growth rate (%).</li>
</ul></li>
<li><strong>Preprocessing Steps</strong>:
<ul>
<li>Missing values were handled by excluding years where data was not reported.</li>
<li>Outliers were checked against global economic events and corrected if data entry errors were suspected.</li>
</ul></li>
</ul>
</section>
<section id="gdp-per-capita-current-us" class="level3">
<h3 class="anchored" data-anchor-id="gdp-per-capita-current-us">GDP Per Capita (Current US$)</h3>
<ul>
<li><strong>File Name</strong>: <code>gdppc.csv</code></li>
<li><strong>Description</strong>: GDP per capita is the gross domestic product divided by midyear population. GDP is the sum of gross value added by all resident producers in the economy plus any product taxes and minus any subsidies not included in the value of the products.</li>
<li><strong>Variables</strong>:
<ul>
<li><code>Country_Name</code></li>
<li><code>Country_Code</code></li>
<li><code>Year</code></li>
<li><code>GDP_Per_Capita</code>: GDP per capita in current U.S. dollars.</li>
</ul></li>
<li><strong>Preprocessing Steps</strong>:
<ul>
<li>Data were adjusted for inflation and standardized to current U.S. dollars for comparability across years.</li>
</ul></li>
</ul>
</section>
<section id="employment-to-population-ratio" class="level3">
<h3 class="anchored" data-anchor-id="employment-to-population-ratio">Employment to Population Ratio</h3>
<ul>
<li><strong>File Name</strong>: <code>employment.csv</code></li>
<li><strong>Description</strong>: The employment to population ratio is the proportion of a country’s population that is employed. Ages 15 and older are generally considered.</li>
<li><strong>Variables</strong>:
<ul>
<li><code>Country_Name</code></li>
<li><code>Country_Code</code></li>
<li><code>Year</code></li>
<li><code>Employment_Ratio</code>: Employment to population ratio (%).</li>
</ul></li>
<li><strong>Preprocessing Steps</strong>:
<ul>
<li>Data gaps were filled using linear interpolation where feasible.</li>
</ul></li>
</ul>
</section>
<section id="metadata-country-classifications" class="level3">
<h3 class="anchored" data-anchor-id="metadata-country-classifications">Metadata: Country Classifications</h3>
<ul>
<li><strong>File Name</strong>: <code>metadata_countries.csv</code></li>
<li><strong>Description</strong>: This metadata file includes additional information about the countries, such as their regional classifications and income group categorizations.</li>
<li><strong>Variables</strong>:
<ul>
<li><code>Country_Code</code></li>
<li><code>Country_Name</code></li>
<li><code>Region</code></li>
<li><code>Income_Group</code></li>
</ul></li>
<li><strong>Preprocessing Steps</strong>:
<ul>
<li>This dataset was used to merge with other datasets on the <code>Country_Code</code> field to ensure consistent country names and to analyze data by region and income group.</li>
</ul></li>
</ul>
</section>
</section>
<section id="data-integrity-and-reproducibility" class="level2">
<h2 class="anchored" data-anchor-id="data-integrity-and-reproducibility">Data Integrity and Reproducibility</h2>
<p>Each dataset underwent rigorous preprocessing to ensure data integrity and reliability for analysis. The preprocessing steps included cleaning, transforming, and merging data to facilitate comprehensive analysis. Scripts for these steps are detailed in the <code>data_preprocessing.ipynb</code> notebook, ensuring full reproducibility of our analysis.</p>
<section id="codebooks" class="level3">
<h3 class="anchored" data-anchor-id="codebooks">Codebooks</h3>
<p>Detailed codebooks for each dataset have been prepared and are available in the documentation section. These codebooks provide a comprehensive overview of the variables, their meanings, and additional details that are crucial for understanding and replicating the analysis.</p>
</section>
</section>
</section>
<section id="data-analysis" class="level1">
<h1>Data Analysis</h1>
<p>This section lists the techniques used to investigate the relationships among GDP growth, GDP per capita, and employment-to-population ratios across different income groups.</p>
<section id="analytical-techniques" class="level2">
<h2 class="anchored" data-anchor-id="analytical-techniques">Analytical Techniques</h2>
<section id="descriptive-statistics" class="level3">
<h3 class="anchored" data-anchor-id="descriptive-statistics">Descriptive Statistics</h3>
<ul>
<li><strong>Purpose</strong>: To provide a baseline understanding of the data distributions, central tendencies, and variability.</li>
<li><strong>Methods Used</strong>:
<ul>
<li>Calculation of mean, median, and standard deviations for GDP growth, GDP per capita, and employment ratios.</li>
<li>Generation of summary tables to compare these metrics across different income groups.</li>
</ul></li>
</ul>
</section>
<section id="time-series-analysis" class="level3">
<h3 class="anchored" data-anchor-id="time-series-analysis">Time-Series Analysis</h3>
<ul>
<li><strong>Purpose</strong>: To observe trends and patterns over time within each income group for the key economic indicators.</li>
<li><strong>Methods Used</strong>:
<ul>
<li>Plotting line graphs to visualize trends in GDP growth, GDP per capita, and employment ratios from 1960 to 2023.</li>
<li>Employing moving averages to smooth out short-term fluctuations and highlight longer-term trends.</li>
</ul></li>
</ul>
</section>
<section id="correlation-analysis" class="level3">
<h3 class="anchored" data-anchor-id="correlation-analysis">Correlation Analysis</h3>
<ul>
<li><strong>Purpose</strong>: To examine the relationships between employment-to-population ratios and GDP per capita within each income group.</li>
<li><strong>Methods Used</strong>:
<ul>
<li>Calculation of Pearson correlation coefficients to measure the strength and direction of the relationship between the variables.</li>
<li>Scatter plots to visually assess the correlation trends, supplemented with regression lines to estimate these relationships.</li>
</ul></li>
</ul>
</section>
</section>
<section id="tools-and-technologies" class="level2">
<h2 class="anchored" data-anchor-id="tools-and-technologies">Tools and Technologies</h2>
<ul>
<li><strong>SQL</strong>: Used for initial data querying and merging tasks to prepare datasets for analysis.</li>
<li><strong>Python</strong>: Utilized extensively for data cleaning, processing, and analysis. Key libraries include Pandas for data manipulation, NumPy for numerical operations, Matplotlib and Seaborn for visualization.</li>
<li><strong>Jupyter Notebook</strong>: Served as the platform for conducting and documenting the data analysis process.</li>
</ul>
</section>
<section id="data-visualization" class="level2">
<h2 class="anchored" data-anchor-id="data-visualization">Data Visualization</h2>
<ul>
<li><strong>GDP Growth Trends by Income Group</strong>: Utilized line plots to depict the fluctuation of GDP growth rates across different income groups over the decades, as seen in the figure below.</li>
</ul>
<div id="fig-id" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-id-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/Average%20GDP%20Growth%20by%20Income%20Group.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-id-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: GDP Growth By Income Group
</figcaption>
</figure>
</div>
<ul>
<li><strong>Employment to Population Ratio Trends</strong>: Analyzed changes in employment ratios over time to determine how economic conditions have impacted employment across income groups.</li>
</ul>
<div id="fig-id" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-id-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/Trend%20of%20Employment%20to%20Population%20Ratio%20by%20Income%20Group.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-id-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Employment to Population Ratio
</figcaption>
</figure>
</div>
<ul>
<li><strong>GDP Per Capita Trends</strong>: Tracked the growth of GDP per capita to assess economic prosperity in different regions and income brackets.</li>
</ul>
<div id="fig-id" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-id-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/Trend%20of%20GDP%20per%20Capita%20by%20Income%20Group.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-id-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: GDP Per Capita
</figcaption>
</figure>
</div>
</section>
<section id="interpretation-of-results" class="level2">
<h2 class="anchored" data-anchor-id="interpretation-of-results">Interpretation of Results</h2>
<ul>
<li>The analysis of GDP growth by income group revealed significant volatility in growth rates, with high-income countries generally experiencing more stable growth.</li>
<li>Employment to population ratios showed varying trends, where high-income groups maintained relatively stable employment levels, whereas low and lower-middle-income groups displayed more fluctuation.</li>
<li>The correlation analysis provided insights into how employment levels are associated with economic output per capita, highlighting that higher employment ratios do not always correlate with higher GDP per capita in low-income countries.</li>
</ul>
</section>
</section>
<section id="results-and-discussion" class="level1">
<h1>Results and Discussion</h1>
<p>This section discusses the results from our analysis. We discuss these findings in light of economic theories, historical context, and potential policy implications.</p>
<section id="key-findings" class="level2">
<h2 class="anchored" data-anchor-id="key-findings">Key Findings</h2>
<section id="gdp-growth-variability-by-income-group" class="level3">
<h3 class="anchored" data-anchor-id="gdp-growth-variability-by-income-group">GDP Growth Variability by Income Group</h3>
<ul>
<li><strong>Observations</strong>: The analysis reveals significant fluctuations in GDP growth across all income groups. Notably, high-income countries showed more stable growth trajectories compared to more volatile growth patterns in low and lower-middle-income groups.</li>
<li><strong>Figure Reference</strong>: Refer to the “Average GDP Growth by Income Group (1960-2023)” plot.</li>
<li><strong>Discussion</strong>: The stability in high-income countries can be attributed to their diversified economies and stronger institutional frameworks, which buffer against economic shocks. Conversely, the volatility observed in lower-income groups may result from their greater reliance on primary industries, which are more susceptible to external shocks and market fluctuations.</li>
</ul>
</section>
<section id="trends-in-employment-to-population-ratio" class="level3">
<h3 class="anchored" data-anchor-id="trends-in-employment-to-population-ratio">Trends in Employment to Population Ratio</h3>
<ul>
<li><strong>Observations</strong>: There was a notable decline in the employment-to-population ratio in low-income groups until the early 2000s, followed by a gradual recovery. High-income countries maintained a relatively stable employment ratio.</li>
<li><strong>Figure Reference</strong>: Refer to the “Trend of Employment to Population Ratio by Income Group (1990-2023)” plot.</li>
<li><strong>Discussion</strong>: The trends in employment ratios highlight the impact of economic policies and global economic conditions on employment levels. The recovery in low-income countries could be linked to increased industrialization and investment in human capital.</li>
</ul>
</section>
<section id="correlation-between-gdp-per-capita-and-employment-ratios" class="level3">
<h3 class="anchored" data-anchor-id="correlation-between-gdp-per-capita-and-employment-ratios">Correlation Between GDP Per Capita and Employment Ratios</h3>
<ul>
<li><strong>Observations</strong>: While higher GDP per capita generally correlates with higher employment ratios in high-income countries, this trend is less pronounced in low-income countries.</li>
<li><strong>Figure Reference</strong>: Statistical analysis detailed in the “Income Group Correlation Table”.</li>
<li><strong>Discussion</strong>: This indicates that simply increasing GDP per capita does not automatically lead to higher employment rates in less developed economies. Factors such as labor market structure, social policies, and the nature of economic growth play significant roles.</li>
</ul>
</section>
</section>
<section id="implications" class="level2">
<h2 class="anchored" data-anchor-id="implications">Implications</h2>
<ul>
<li><strong>Economic Policy</strong>: These findings suggest that policymakers in low-income countries should not solely focus on GDP growth but also on creating quality jobs that reflect economic advancements. Additionally, diversifying the economy can reduce vulnerability to economic shocks and stabilize growth.</li>
<li><strong>Future Research</strong>: Further studies could explore the specific sectors within these economies that are most conducive to simultaneous growth in GDP and employment, particularly focusing on technology and service sectors.</li>
<li><strong>Global Economic Stability</strong>: Understanding the dynamics between GDP and employment across different income groups is crucial for global economic stability, especially as it pertains to international trade, investment flows, and economic aid strategies.</li>
</ul>
</section>
<section id="limitations" class="level2">
<h2 class="anchored" data-anchor-id="limitations">Limitations</h2>
<ul>
<li><strong>Data Limitations</strong>: Despite rigorous data preprocessing, discrepancies in data reporting and availability across countries and years may affect the robustness of the findings.</li>
<li><strong>Scope of Analysis</strong>: While this analysis provides a broad overview, it does not account for intra-group disparities that may offer additional insights into economic conditions.</li>
</ul>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>Our analysis of economic indicators across different income groups has provided significant insights into the dynamics of GDP growth, GDP per capita, and employment-to-population ratios from 1960 to 2023. Here we list the major findings and propose future directions for research and policy development.</p>
<section id="major-insights" class="level2">
<h2 class="anchored" data-anchor-id="major-insights">Major Insights</h2>
<ul>
<li><strong>GDP Growth Stability</strong>: High-income countries exhibit more stable GDP growth compared to the more volatile growth seen in lower income groups. This stability is crucial for long-term economic planning and sustainability.</li>
<li><strong>Employment Trends</strong>: The employment-to-population ratio shows varying trends across income groups, with high-income countries maintaining more stable employment rates. The fluctuations in low-income groups highlight the need for policies that enhance job security and employment opportunities.</li>
<li><strong>Correlation Analysis</strong>: The relationship between GDP per capita and employment ratios varies across income groups. In high-income countries, a strong positive correlation exists, whereas in low-income countries, the correlation is weaker, suggesting that economic growth does not automatically translate into employment growth.</li>
</ul>
</section>
<section id="implications-for-policy" class="level2">
<h2 class="anchored" data-anchor-id="implications-for-policy">Implications for Policy</h2>
<p>The findings underscore the importance of diversified economic strategies that go beyond focusing solely on GDP growth. For low-income countries, policies aimed at improving education, infrastructure, and technological adoption could spur economic development and enhance employment rates. Additionally, the results advocate for the stability and resilience of economic systems to better withstand global economic shocks.</p>
</section>
<section id="future-research" class="level2">
<h2 class="anchored" data-anchor-id="future-research">Future Research</h2>
<ul>
<li><strong>Sector-Specific Analysis</strong>: Future studies could analyze the impact of different economic sectors on GDP and employment to identify which sectors contribute most to sustainable growth.</li>
<li><strong>Policy Impact Studies</strong>: Research assessing the effectiveness of specific economic policies on improving GDP and employment figures would provide valuable feedback for policymakers.</li>
<li><strong>Longitudinal Studies</strong>: Further longitudinal analyses could help understand the long-term effects of economic changes within each income group, providing deeper insights into the cyclic nature of economic growth and employment.</li>
</ul>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>